<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Revista â€“ Flipbook</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style>
html, body {
  width: 100%;
  height: 100%;
  margin: 0;
  background: #111;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}

.stage {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}

#flipbook {
  width: 98vw;
  height: 98vh;
}

#flipbook .page {
  background: #fff;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

#flipbook img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  user-select: none;
  -webkit-user-drag: none;
}

.nav {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,.55);
  color: #fff;
  border: none;
  font-size: 48px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  cursor: pointer;
  z-index: 10;
  display: grid;
  place-items: center;
}

.nav.prev { left: 16px; }
.nav.next { right: 16px; }

.months {
  position: fixed;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,.6);
  padding: 10px 16px;
  border-radius: 30px;
  display: flex;
  gap: 6px;
  z-index: 20;
}

.months button {
  background: #444;
  color: #ddd;
  border: none;
  padding: 6px 12px;
  border-radius: 16px;
  cursor: pointer;
  font-size: 13px;
}

.months button.active {
  background: #fff;
  color: #000;
}

/* ZOOM */
.zoom-controls {
  position: fixed;
  top: 12px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 20;
  display: flex;
  gap: 8px;
}

.zoom-controls button {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: none;
  background: rgba(0,0,0,.7);
  color: #fff;
  font-size: 20px;
  cursor: pointer;
}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="libs/turn.min.js"></script>
</head>
<body>

<div class="stage">
  <div id="flipbook">
    <!-- PÃGINA FANTASMA (NO TOCAR) -->
    <div class="page"></div>

    <!-- 36 pÃ¡ginas reales -->
    <script>
      for (let i = 1; i <= 36; i++) {
        document.write(`<div class="page"><img src="Imagenes/Boletin${i}.jpg"></div>`);
      }
    </script>
  </div>
</div>

<button class="nav prev">â€¹</button>
<button class="nav next">â€º</button>

<div class="zoom-controls">
  <button id="zoomOut">âˆ’</button>
  <button id="zoomIn">+</button>
</div>

<div class="months">
  <button data-page="1" class="active">Febrero</button>
  <button data-page="5">Marzo</button>
  <button data-page="9">Abril</button>
  <button data-page="13">Mayo</button>
  <button data-page="17">Junio</button>
  <button data-page="21">Julio</button>
  <button data-page="25">Agosto</button>
  <button data-page="29">Septiembre</button>
  <button data-page="33">Noviembre</button>
</div>

<audio id="flipSound" src="Audio/Sonido.mp3" preload="auto"></audio>

<script>
let zoom = 1;

$('#flipbook').turn({
  width: $('#flipbook').width(),
  height: $('#flipbook').height(),
  autoCenter: true,
  display: 'double',
  elevation: 50,
  page: 2   // ðŸ”¥ fuerza arranque en pÃ¡ginas 1 y 2 reales
});

const fb = $('#flipbook');
const flipSound = document.getElementById('flipSound');
flipSound.volume = 0.4;

fb.on('turned', function(e, page){
  flipSound.currentTime = 0;
  flipSound.play();

  if (page <= 2) {
    document.querySelector('.nav.prev').style.opacity = 0.3;
    document.querySelector('.nav.prev').style.pointerEvents = 'none';
  } else {
    document.querySelector('.nav.prev').style.opacity = 1;
    document.querySelector('.nav.prev').style.pointerEvents = 'auto';
  }

  document.querySelectorAll('.months button').forEach(btn => {
    btn.classList.toggle('active', parseInt(btn.dataset.page) === page);
  });
});

document.querySelector('.nav.next').onclick = () => fb.turn('next');
document.querySelector('.nav.prev').onclick = () => fb.turn('previous');

document.querySelectorAll('.months button').forEach(btn => {
  btn.onclick = () => fb.turn('page', parseInt(btn.dataset.page));
});

document.getElementById('zoomIn').onclick = () => {
  zoom = Math.min(zoom + 0.1, 2);
  $('#flipbook').css('transform', `scale(${zoom})`);
};

document.getElementById('zoomOut').onclick = () => {
  zoom = Math.max(zoom - 0.1, 0.6);
  $('#flipbook').css('transform', `scale(${zoom})`);
};

window.addEventListener('resize', () => {
  fb.turn('size', $('#flipbook').width(), $('#flipbook').height());
});
</script>

</body>
</html>
